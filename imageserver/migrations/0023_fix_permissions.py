# Generated by Django 2.2.11 on 2020-05-06 05:08

from django.db import migrations


def migrate_to_anonymous_view(apps, schema_editor):
    Service = apps.get_model('imageserver', 'Service')
    for service in Service.objects.all():
        service.anonymous_view = service.visibility == 'public'
        service.authenticated_user_view = service.visibility == 'private'
        service.save()


def undo_migrate_to_anonymous_view(apps, schema_editor):
    Service = apps.get_model('imageserver', 'Service')
    for service in Service.objects.all():
        if service.anonymous_view:
            service.visibility == 'public'
        else:
            service.visibility == 'private'
        service.save()


class Migration(migrations.Migration):

    dependencies = [
        ('imageserver', '0022_auto_20210321_0817'),
    ]
    operations = [
        migrations.RunPython(migrate_to_anonymous_view, undo_migrate_to_anonymous_view),
        migrations.RemoveField(
            model_name='service',
            name='visibility',
        ),
    ]
