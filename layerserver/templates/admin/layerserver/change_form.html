{% extends "django_vue_tabs/change_form.html" %}
{% block admin_change_form_document_ready %}{{ block.super }}
<script type="text/javascript">
(function ($){
    var all_fields = ['shape_radius', 'stroke_color', 'stroke_width', 'stroke_dash_array', 'fill_color',
    'fill_opacity', 'marker_name', 'marker_color', 'icon_type', 'icon', 'icon_color'];

	function apply_shapetype() {
		var element = $('#id_shapetype');
        var fields = {
            '': [],
            'marker': ['marker_color', 'icon_type', 'icon', 'icon_color'],
            'line': ['stroke_color', 'stroke_width', 'stroke_dash_array'],
            'polygon': ['stroke_color', 'stroke_width', 'stroke_dash_array', 'fill_color', 'fill_opacity'],
            'circle': ['shape_radius', 'stroke_color', 'stroke_width', 'stroke_dash_array', 'fill_color',
            'fill_opacity'],
        }
        for (var i in all_fields){
            field = all_fields[i];
            var selected = fields[element.val()];
            if (selected.indexOf(field) === -1){
                $('div.field-' + field).hide();
            }else{
                $('div.field-' + field).show();
            }
        }
	}

	$(document).ready(function(){
        apply_shapetype();
		$('#id_shapetype').on('change', apply_shapetype);

	});
})(django.jQuery);
</script>
{% endblock %}
